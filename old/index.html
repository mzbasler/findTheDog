<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rastreador de Cão Perdido - Porto Alegre</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container-fluid py-4">
      <div class="toast-container">
        <!-- Toasts serão adicionados aqui -->
      </div>

      <header class="text-center mb-4">
        <h1 class="display-4">
          <i class="fas fa-dog text-danger"></i> Rastreador de Cão Perdido
        </h1>
        <p class="lead">
          Ajude a encontrar nosso amigo perdido em Porto Alegre
        </p>
        <div class="alert alert-info">
          <strong>Última localização conhecida:</strong> O cão saiu correndo da
          Petshop próximo à Anita Garibaldi em 15/04/2024
        </div>
      </header>

      <div class="row">
        <div class="col-md-4">
          <div class="info-card">
            <!-- Botão para definir local de desaparecimento será adicionado aqui dinamicamente pelo JavaScript -->

            <h4><i class="fas fa-map-marker-alt"></i> Cadastrar Avistamento</h4>
            <form id="avistamentoForm">
              <div class="form-section">
                <div class="form-section-title">
                  <i class="fas fa-calendar-alt"></i> Data e Hora
                </div>
                <div class="mb-3">
                  <input
                    type="datetime-local"
                    class="form-control"
                    id="dataAvistamento"
                    required
                  />
                </div>
              </div>

              <div class="form-section">
                <div class="form-section-title">
                  <i class="fas fa-align-left"></i> Descrição
                </div>
                <div class="mb-3">
                  <textarea
                    class="form-control"
                    id="descricao"
                    rows="3"
                    placeholder="Ex: Cão visto correndo em direção ao parque..."
                    required
                  ></textarea>
                </div>
              </div>

              <div class="form-section">
                <div class="form-section-title">
                  <i class="fas fa-map"></i> Localização
                </div>

                <div class="address-search">
                  <label for="endereco" class="form-label"
                    >Buscar por Endereço</label
                  >
                  <div class="input-group mb-2">
                    <input
                      type="text"
                      class="form-control"
                      id="endereco"
                      placeholder="Ex: Rua Coronel Bordini, 414"
                    />
                    <button
                      class="btn btn-outline-primary"
                      type="button"
                      id="buscarEndereco"
                    >
                      <i class="fas fa-search"></i> Buscar
                    </button>
                  </div>
                  <div class="address-results" id="addressResults"></div>

                  <div class="address-details" id="addressDetails">
                    <div class="row g-2 mt-2">
                      <div class="col-md-8">
                        <label for="logradouro" class="form-label"
                          >Logradouro</label
                        >
                        <input
                          type="text"
                          class="form-control"
                          id="logradouro"
                        />
                      </div>
                      <div class="col-md-4">
                        <label for="numero" class="form-label">Número</label>
                        <input type="text" class="form-control" id="numero" />
                      </div>
                      <div class="col-md-6">
                        <label for="bairro" class="form-label">Bairro</label>
                        <input type="text" class="form-control" id="bairro" />
                      </div>
                      <div class="col-md-6">
                        <label for="cidade" class="form-label">Cidade</label>
                        <input
                          type="text"
                          class="form-control"
                          id="cidade"
                          value="Porto Alegre"
                          readonly
                        />
                      </div>
                    </div>
                  </div>
                </div>

                <div class="mb-3">
                  <label class="form-label">Coordenadas Geográficas</label>
                  <div class="coordinate-inputs">
                    <div class="form-group">
                      <label for="latitude" class="form-label">Latitude</label>
                      <input
                        type="text"
                        class="form-control"
                        id="latitude"
                        placeholder="-30.123456"
                        required
                      />
                    </div>
                    <div class="form-group">
                      <label for="longitude" class="form-label"
                        >Longitude</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="longitude"
                        placeholder="-51.123456"
                        required
                      />
                    </div>
                  </div>
                </div>

                <div class="d-flex gap-2">
                  <button
                    type="button"
                    class="btn btn-outline-secondary flex-grow-1"
                    id="usarMinhaLocalizacao"
                  >
                    <i class="fas fa-location-arrow"></i> Minha Localização
                  </button>
                  <button
                    type="button"
                    class="btn btn-outline-secondary flex-grow-1"
                    id="selecionarNoMapa"
                  >
                    <i class="fas fa-map-pin"></i> Selecionar no Mapa
                  </button>
                </div>
              </div>

              <div class="d-grid gap-2 mt-3">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-plus-circle"></i> Cadastrar Avistamento
                </button>
                <button type="button" id="calcularArea" class="btn btn-success">
                  <i class="fas fa-search-location"></i> Calcular Área de Busca
                </button>
              </div>
            </form>
          </div>

          <div class="info-card">
            <h4>
              <i class="fas fa-history"></i> Linha do Tempo de Avistamentos
            </h4>
            <div id="listaAvistamentos" class="timeline">
              <div class="text-center text-muted py-3" id="semAvistamentos">
                Nenhum avistamento registrado ainda
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-8">
          <div class="position-relative">
            <div id="map"></div>
            <div
              class="loading-spinner spinner-border text-primary"
              role="status"
              id="mapLoading"
            >
              <span class="visually-hidden">Carregando...</span>
            </div>
          </div>
          <div class="info-card mt-3">
            <h4><i class="fas fa-bullseye"></i> Área de Busca</h4>
            <div id="areaInfo">
              <div class="alert alert-warning">
                <i class="fas fa-info-circle"></i> Cadastre pelo menos 2
                avistamentos para calcular a área de busca.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="script.js"></script>
  </body>
</html>
